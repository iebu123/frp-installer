<!-- برای نمایش صحیح راست‌به‌چپ و راست‌چین بودن متن فارسی، این تگ را اضافه کنید -->
<div dir="rtl" align="right">

# اسکریپت نصب و مدیریت FRP

این اسکریپت یک روش تعاملی و خودکار برای نصب، پیکربندی و مدیریت `frp` (یک پراکسی معکوس سریع) بر روی سیستم شما فراهم می‌کند. این اسکریپت راه‌اندازی سرور (`frps`) و کلاینت (`frpc`) را ساده می‌کند.

## شروع سریع

می‌توانید با یک دستور، اسکریپت را دانلود و اجرا کنید:

```bash
bash <(curl -sSL https://raw.githubusercontent.com/iebu123/frp-installer/main/frp_installer.sh)
```

## ویژگی‌ها

- **نصب/به‌روزرسانی خودکار:** آخرین نسخه `frp` را متناسب با سیستم‌عامل و معماری شما دانلود و نصب می‌کند.
- **پیکربندی تعاملی:** شما را در فرآیند پیکربندی `frps` و `frpc` با یک منوی کاربرپسند راهنمایی می‌کند.
- **اعتبارسنجی پیکربندی:** فایل‌های پیکربندی تولید شده را برای اطمینان از معتبر بودن آن‌ها تأیید می‌کند.
- **مدیریت سرویس Systemd:** سرویس‌های `systemd` را برای `frps` و `frpc` ایجاد و مدیریت می‌کند و به شما امکان می‌دهد به راحتی سرویس‌ها را شروع، متوقف، راه‌اندازی مجدد و وضعیت آن‌ها را بررسی کنید.
- **ریست خودکار سرویس:** یک کار cron برای ریست خودکار سرویس‌های `frp` به صورت روزانه، هفتگی یا ماهانه تنظیم کنید تا اطمینان حاصل شود که همیشه به درستی در حال اجرا هستند.
- **مدیریت پراکسی:** به راحتی پراکسی‌ها را برای کلاینت `frpc` اضافه و مدیریت کنید، با پشتیبانی از پورت‌های تکی و محدوده‌ای از پورت‌ها.
- **نام‌گذاری خودکار پراکسی:** به طور خودکار نام‌های پراکسی را بر اساس پورت‌ها تولید می‌کند و فرآیند پیکربندی را ساده می‌سازد.
- **رابط کاربری کاربرپسند:** یک رابط کاربری منومحور، واضح و جذاب برای ناوبری و عملکرد آسان.

## این اسکریپت چه کاری انجام می‌دهد:

1. **دانلود فایل‌های کامپایل شده تونل FRP:** آن‌ها را در `/usr/local/bin` ذخیره می‌کند.
2. **ایجاد فایل‌های پیکربندی برای FRP:** این فایل‌ها در دایرکتوری `/etc/frp` قرار دارند.
3. **ایجاد سرویس‌های systemd:** تونل را با استفاده از پیکربندی‌های تولید شده راه‌اندازی می‌کند. فایل‌های سرویس در `/etc/systemd/system/frps.service` برای سرور و `/etc/systemd/system/frpc-<custom_name>.service` برای هر نمونه کلاینت ذخیره می‌شوند.
4. **فایل‌های سرویس اختصاصی برای کلاینت:** هر سرویس کلاینت با یک نام منحصر به فرد ایجاد می‌شود که امکان مدیریت و پیکربندی مستقل برای اتصالات مختلف سرور را فراهم می‌کند.
5. **(اختیاری) ریست خودکار سرویس:** یک کار cron برای راه‌اندازی مجدد خودکار تمام سرویس‌های `frp` در فرکانس مشخص شده (روزانه، هفتگی یا ماهانه) ایجاد می‌کند.

برای مشاهده لیست تونل‌های کلاینت ایجاد شده، دستور زیر را اجرا کنید:
```bash
systemctl list-units --type=service | grep frpc-
```

## چگونه لاگ‌ها را مشاهده کنیم

برای مشاهده ۵۰ خط آخر لاگ‌های یک سرویس:

* **برای سرور:** `journalctl -u frps.service -n 50`
* **برای کلاینت:** `journalctl -u frpc-<client_name>.service -n 50`

## نیازمندی‌ها

- `bash`
- `curl`
- دسترسی `sudo`
- `cron` (برای ویژگی ریست خودکار سرویس)

## استفاده

1. اسکریپت را قابل اجرا کنید:
    ```bash
    chmod +x frp_installer.sh
    ```
2. اسکریپت را اجرا کنید:
    ```bash
    ./frp_installer.sh
    ```

### گردش کار پیشنهادی

برای راه‌اندازی تونل FRP خود، این مراحل را دنبال کنید:

1. **نصب تونل** (گزینه ۱ در منوی اصلی).
2. **پیکربندی سرور و کلاینت** (گزینه‌های ۲ و ۳ در منوی اصلی):
    * ابتدا سرور را پیکربندی کنید (مثلاً در داخل ایران، چین و غیره)، سپس سرویس آن را ایجاد و راه‌اندازی کنید.
    * سپس، کلاینت را پیکربندی کنید (مثلاً روی سروری خارج از کشور، بدون محدودیت).
3. **(اختیاری) تنظیم ریست خودکار سرویس** (گزینه ۵ در منوی اصلی) برای اطمینان از فعال ماندن سرویس‌ها.

برای افزودن سرویس کلاینت دوم، سوم یا بیشتر برای سرورهای دیگر:

* دوباره گزینه ۳ را در منوی اصلی اجرا کنید: پیکربندی کلاینت (frpc)

## گزینه‌های منو

اسکریپت یک منو با گزینه‌های زیر ارائه می‌دهد:

1. **نصب/به‌روزرسانی FRP:** `frp` را به آخرین نسخه نصب یا به‌روزرسانی می‌کند.
2. **پیکربندی سرور (frps):** شما را در فرآیند ایجاد یک فایل پیکربندی برای سرور `frp` راهنمایی می‌کند.
3. **پیکربندی کلاینت (frpc):** شما را در فرآیند ایجاد یک فایل پیکربندی برای کلاینت `frp` راهنمایی می‌کند.
4. **مدیریت سرویس‌ها:** یک زیرمنو برای مدیریت سرویس‌های `systemd` برای `frps` و `frpc` فراهم می‌کند.
5. **تنظیم ریست خودکار سرویس:** یک کار cron برای راه‌اندازی مجدد خودکار تمام سرویس‌های `frp` ایجاد می‌کند.
6. **خروج:** از اسکریپت خارج می‌شود.

## پیکربندی

- فایل‌های پیکربندی در `/etc/frp/` ذخیره می‌شوند.
- اسکریپت قبل از ایجاد فایل‌های پیکربندی جدید، از فایل‌های موجود پشتیبان‌گیری می‌کند.

## سرویس‌ها

- اسکریپت می‌تواند سرویس‌های `systemd` برای `frps` و `frpc` ایجاد کند.
- شما می‌توانید سرویس‌ها را (شروع، توقف، راه‌اندازی مجدد، وضعیت، لاگ‌ها) از منوی "مدیریت سرویس‌ها" مدیریت کنید.

</div>
